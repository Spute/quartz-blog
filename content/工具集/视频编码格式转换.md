---
title: 视频编码格式转换
---

## 前言

Handbrake Mac 是一款适用于 Mac 操作系统的视频转码器，能够将 DVD 或普通视频转换为高质量的 MP4 或 MKV。HandBrake mac 版可以转换常见的视频文件或者 DVD、蓝光视频，包括 MKV、AVI、MP4、、ISO、VOB 等视频格式，功能非常强大。

Handbrake 无需特别技巧便可直接将 DVD 电影内转换成 AVI/MPEG4 格式,还有 MP4 及 OGM 输出、AAC 及 Vorbis 编码。HandBrake 能转换被加密的(encrypted)DVD，转换时以多任务方式工作，同时让你选择语言，声音及画面质量，转换后的画面大小等。具备 x264 的多线程 H.264 编码和 H.264 Baseline 选项。

今天来安利一款视频压制软件——HandBrake（被亲切称为大菠萝）

HandBrake 是基于 ffmpeg 的视频转码和压制的多平台开源软件（mac 用户福音），支持格式多，功能丰富，界面清爽，目前已有中文界面。（而且不报 bug 啊!!）

## 场景

那么，我们什么时候会用到 HandBrake 呢？以下列举了一些适合使用 HandBrake 的场景（包括但不限于）：

1.需要将视频转码为 mp4、mkv、webm

2.需要大幅压缩视频体积，且尽可能保留原画质

3.需要将可变帧率视频转为固定帧率（可变帧率是造成大部分音画不同步的原因）

4.需要快速无脑反交错（如处理 mpeg-ts，内置 yadif 滤镜还不错）

5.特别当你是 mac 用户时

当然 HandBrake 也不是万能的，也有一些不适合场景（包括但不限于）：

1.需要压制 ass，ssa 格式的字幕

2.对于反交错要求高

3.不想对音频进行重编码

4.视频需要重新封装的情况

## 安装使用

1.下载 HandBrake：https://handbrake.fr/

github 地址：[https://github.com/HandBrake/HandBrake](https://github.com/HandBrake/HandBrake)

2.下载 MediaInfo：[https://mediaarea.net/en/MediaInfo](https://mediaarea.net/en/MediaInfo)

（MediaInfo 用于查看视频详细信息，同样支持多平台，非常有用，强烈建议下载）（有 PotPlayer 的朋友不下载也可以，右键属性同样可以看到视频信息）

还是提醒下，下载软件务必前往官网，千万别一不小心点进 xx 软件园之类的，到时候下载一个全家桶可以把人烦死。

### 查看视频信息

开始压制视频前的第一步一定是判断视频的类型。不同类型的视频需要使用不同的方法去处理。本文拿一个 ts 视频举例。首先我们用 MediaInfo 打开它：

![[KvGabmPtko0vjgx9QdHcQ8bFnWG.webp]]

打开 MediaInfo，重点看帧率、扫描方式。（如果视频是可变帧率，我们后面再说）

![[FAkVbqp3jolQAMxZJ7icPfBbnBh.webp]]

### 设置 HandBrake 参数

① 点击“打开源”，加载视频。

![[Ll8lbtE2HoZ15jxAQIvcftNcnic.webp]]

Preset 这里是系统预设了一些压制模式，也可以添加自定义预设。后续所有参数的更改都会覆盖掉原先预设的参数，所以不用担心预设选错。但还是建议就在系统默认的 Fast 1080p 30 的基础上去修改，需要改的东西相对比较少。

② 摘要选项卡

格式选择 MP4，保存为这里就选自己要保存的路径和文件名（默认 m4v 我给改成 mp4 了）

![[F0DqbT5X6oNUfSx1QHfcy7lDnzc.webp]]

默认保存路径和文件后缀名也可以在“工具 → 首选项 → 输出文件”中进行修改

③ 尺寸选项卡

HandBrake 正确判断出了文件的分辨率和 PAR，这里我们保留原分辨率，不做任何更改。

![[QmzabIChVoJ3PlxMEh7cJeplnhc.webp]]

如非必要，一般不修改分辨率

如果需要对视频进行一些后期处理，比如添加字幕，1440x1080 显示为 1920x1080 的分辨率可能会造成一些麻烦（相当于视频是被拉伸的）。那么这个时候就需要适当修改一下分辨率，让 PAR 等于 1，比如修改为 1280x720。需要注意的是，HandBrake 似乎不允许分辨率的大小超过原视频的分辨率，即 1440x1080 不能被压制为 1920x1080。

![[V0fKbArUJoPNU9xLmSpcMnVlnje.webp]]

从 1440x1080 修改为 1280x720 的方法

④ 滤镜选项卡

因为我们之前已经判断过视频的类型是隔行扫描，并且视频出现了横纹。所以我们在反交错这里选择 Yadit 滤镜。

逐行扫描和不需要进行反交错的视频，隔行扫描请选择 Off。

其他选项都保持 Off 即可。

![[FHhAb9zMNoTlMhxwnsqcTP6snEb.webp]]

⑤ 视频选项卡

终于进入了最关键的部分~这里的设置将极大程度决定压制视频的质量和所需时间！

编码器选择 H.264(x264)

帧率（FPS）选择 Same as source，固定帧率

注意：如果原视频是可变帧率需要转换为固定帧率的情况，则需要指定帧率。比如原视频帧率平均下来是 29.88，那我们就指定一个比较接近它的 29.97。

右边质量这里有两种选择：

一是选择固定质量（CRF）。我个人比较推荐这种模式，参数 21-24 就可以，数字越大压制出来的视频体积越小，但画质相对差些；数字越小视频画质越接近无损，但相应的体积就会变大（而且是变大很多）

投 b 站的话，23-24 差不多了；不在意体积只想画质好点的，21-22 基本够了。<del>追求无损请随意</del>

二是选择平均码率（kbps），这个可以把视频的平均码率控制在你设置的码率里。如果很在意视频体积或者码率（比如一定要压到 2000kbps 以下）的话可以选这种模式，推荐勾选二次编码。不明白我的视频到底多少码率才合适的朋友请直接选择第一种固定质量。

下面优化视频这里，

编码器预设选择 Slow 或 Slower、Very Slow。越慢压制效果越好。实在嫌慢的朋友可以考虑下 Medium，Fast 的话画质已经会明显下降了。

其他 Auto 就行

![[M9vvbpVQDolO2HxOQRjcK8sxn0c.webp]]

⑥ 音频选项卡

编码选择 AAC，Bitrate（比特率）选择 320k

比特率这边可以参考下原视频的音频的比特率，看需要选个差不多的就行。这边我因为 MediaInfo 没有显示原视频的音频平均比特率，所以指定的稍微大了些，其实一般 192k 就足够了。

HandBrake 不支持音频流直接封装

⑦ 字幕选项卡

这次我们不需要压制字幕，所以点击清除~当然不管它也没关系

这里不详细介绍 HandBrake 压制字幕的方法，但务必要注意 HandBrake 不支持 ass 和 ssa 的字幕格式。（特别是特效字幕）

![[YO0LbrXY2oS8sYxdqioc5GDun0g.webp]]

⑧ 章节选项卡

这次不需要创建章节，所以也不需要勾选。

如有需要可参考官方文档 https://handbrake.fr/docs/en/1.3.0/advanced/chapter-markers.html

![[SCECbWOzQoOwfaxfJtQc2QwKnDe.webp]]

### 压制视频

点击预览可以查看压制后效果（只提供几张图片的预览）

回到摘要选项卡，可以看到之前选择的一些参数，确认无误后，点击开始编码

然后你的 CPU 就开始忙碌了~

![[JW8tbfSpIoeRY0xqdpGc4cnxnKh.webp]]

点击开始编码后，界面最下方会出现进度条，进度条完成后，视频就压好啦~

![[CXOAbXS5doWeGrxjc2zcG6zkndf.webp]]

除了停止，HandBrake 还提供暂停的选项。不过相比小丸，HandBrake 在压制过程中不能实时显示平均码率和预估视频体积

如果需要处理多个视频，可以点击添加到队列中，然后设置下一个视频的参数。最后一起压制。
