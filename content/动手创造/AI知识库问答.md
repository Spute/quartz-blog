---
title: AI 知识库问答
---

# 项目介绍

# 技术方案合理性

- 目标：基于大语言模型，让 AI 充当一个产品专家，为用户提供专业的指导和培训
- 任务特点：

  - 知识密集大
  - 知识专业性较强
  - 知识类型多样、信息分散
- 大语言模型特点：

  - <strong>数据集是静态的：</strong>大语言模型的知识参数是静态的，在模型训练完成后就固定下来的，更新知识需要重新训练，成本较高，一般由模型厂商完成。
  - <strong>缺乏特定领域的知识</strong>：大语言模型接受的是通用任务的训练。
  - <strong>幻觉“黑匣子</strong>”：很难理解大语言模型基于哪些数据来源得出的结论。大语言模型有时会产生不准确或毫无根据的信息。需要接受高质量的信息输入才能避免这种情况。
- 技术方案：外挂知识库

  - 想要获得额外的知识的另外一种方式，将信息作为提示词提供给大语言模型
  - 该方案具备时效性高、成本低的特点，符合需求任务特点
  - 外挂知识库 = 大语言模型 + 检索组

![[EFjNbEOVWoYhHmx5mK5cfOysnyg.png]]

# 项目详情

## 评估方法--白盒测试

- <strong>黑盒测试</strong>：关注软件的外部行为，输入和输出
- <strong>白盒测试</strong>：关注软件内部结构、逻辑、执行细节

> [!TIP]

1. 黑盒测试，使用有限的测试用例很难覆盖内部执行的情况。
2. 白盒测试，基于对软件内部结构的理解来设计测试案例，对每个步骤的输入输出做验证，测试覆盖率更高。

<table>
<tr>
<td>测试点<br/></td><td>测试点说明<br/></td><td>影响<br/></td><td>白盒化方式<br/></td><td>备注<br/></td></tr>
<tr>
<td>文本分块<br/><br/></td><td>因模型的上下文长度限制，需在语料预处理阶段，按一定规则（文本语义、关联性）对文档进行分块。<br/></td><td>- 分块的质量直接影响回答的质量<br/>- 语料越大，要实现较好问答效果，对文本块合理性要求越高<br/></td><td>- 产品功能	- 标注引用文本	- 文本分块预览<br/><br/></td><td><br/></td></tr>
<tr>
<td>语义对齐<br/><br/></td><td>能支持近义词或语义相关内容的检索问答。<br/><br/></td><td>- 真实场景会存在用户因缺乏专业知识，不知道专业术语，只能使用语义相似的文字提问。<br/><br/></td><td>优化提示语<br/><br/></td><td>防护等级与IP等级、第三关节与A3。<br/><br/></td></tr>
<tr>
<td>非纯文本识别<br/><br/></td><td>文档中存在纯文本、表格、图片嵌套时，对表格、图片非纯文本识别效果。<br/></td><td>- 影响非纯文本信息的问答效果<br/><br/></td><td>优化提示语<br/></td><td>原始文档存在大量表格、图片<br/></td></tr>
</table>

## 结果

- 前提：使用单个原始文档得到的测试结果。
- 观点：

  - 使用问答的文档越多，问答准确率会变低。
    - 文本块需要关联额外的上下文，如标题。
    - 对文本分块合理性要求会更高，相似度匹配难度会变大
  - 问答准确度越高想要提升的难度越大，需要投入的成本和工作量越大

## 优化方向

<table>
<tr>
<td>问题<br/></td><td>影响<br/></td><td>供应商反馈<br/></td><td>方案+成本+风险<br/></td><td>备注<br/></td></tr>
<tr>
<td>应用白盒化程度不高<br/><br/></td><td>- 测试评估难度变大、准确率变低<br/><br/></td><td>- 后续优化<br/><br/></td><td>等待相关功能：标注引用文本、文本分块预览<br/>风险：等待时间不确定，有工期风险<br/></td><td><br/></td></tr>
<tr>
<td>文本分块效果<br/><br/></td><td>- 分块的质量直接影响回答的质量（文本召回时给到大模型的内容不全等）<br/></td><td>- 应用只具备通用场景的切分策略<br/>- 版式越复杂，分块效果越差<br/>- 对于无线表，水印，页眉页脚，特殊字体等，容易造成识别和切分效果问题。<br/>- 如果这边文档比较规整，都有很明确的标识符或者结构，可以使用自定义切分。<br/>- 如果增加的量不是太多，同时对效果要求很高。可以人为添加切分符，再自定义切分。<br/></td><td>人工处理：<br/>- 增加标识符，进行自定义切分<br/>- 简化版式<br/>工作量：文档越多工作量越大<br/>风险：人工处理后，效果仍然提升不大<br/></td><td><br/></td></tr>
<tr>
<td>语义对齐问题<br/><br/></td><td>- 使用近似词问答效果不佳<br/></td><td>- 用原文没有的文本提问，会降低正确率，需要修改原文，或在原文生成问答对。<br/>- 除了等待向量模型迭代，也可以对向量模型进行微调。<br/>- 如果是相对固定的问题，可以使用QA对模式人为设定qa，再把一个问题用多种方式表示表述进行泛化。<br/>- 同义词范化<br/><br/></td><td>方案：<br/>- 整理专业术语提供给供应商对模型进行微调<br/>- 准备QA问答对作为问答语料<br/>成本：<br/>- 微调成本较大<br/>- 准备训练集1000左右问答对<br/>风险：部分供应商可能不支持微调<br/><br/></td><td><br/></td></tr>
<tr>
<td>表格、图片识别问题<br/><br/></td><td>- 对于表格和图片中的信息无法准确回答<br/></td><td>- 使用多模态模型，比如：GPT4-turbo<br/>- 后续迭代升级<br/><br/></td><td>- 调研国内成熟的多模态模型<br/>风险：<br/>- 国内没有成熟的商用多模态模型<br/>- 多模态模型与外挂知识库是否匹配<br/>- 多模态模型成本较大<br/></td><td><br/><br/></td></tr>
<tr>
<td>复合问题回答<br/><br/></td><td>- 复合问题问答效果不佳<br/><br/></td><td>- 将复合问题拆分为简单问题，答题效果更好。比如问题5，“自由驱动功能是什么以及如何使用”拆分为“自由驱动功能是什么”和“自由驱动功能如何使用”。<br/></td><td>- 为用户提供提示语优化的说明<br/><br/></td><td><br/></td></tr>
</table>
