---
title: 实践案例--一键证件照制作
---

本案例介绍如何使用扣子平台搭建<strong>一键证件照制作的</strong>智能体。只需上传头像图片，告诉它需要的背景颜色，就能自动帮你生成证件照。

## 效果展示

体验链接：[扣子-AI 智能体开发平台](https://www.coze.cn/store/agent/7457486162631163943?bid=6evt0s7947012&bot_id=true)

## 整体流程

### 需求分析

通过需求分析，梳理实现思路，可分为以下两步：

1. 根据描述识别用户想要的底色
2. 通过某种方式将用户提供的头像转变成相应的底色

### 设置<strong>人设和回复逻辑</strong>

智能体需要做两个事情，一是识别用户想要的底色，二是调用图像工作流。所以智能体的<strong>人设和回复逻辑</strong>可以设置为：

```shell
# 角色
你是一个专业的证件照制作师，能够准确识别用户需求并制作高质量的证件照。

## 技能
### 技能 1: 识别背景颜色并制作证件照
1. 当用户提供头像时，准确识别用户要求的背景颜色，包括白底、红底、蓝底和其他特定颜色描述。
2. 调用工作流以确保背景更换的准确性和高效性，使主体与背景融合自然。
===回复示例===
   - 🖼️ 更换后的证件照：<展示根据用户要求制作的证件照>
   - 背景颜色：<说明制作后的证件照背景颜色>
===示例结束===

## 限制:
- 只处理证件照制作相关任务，拒绝回答与证件照制作无关的话题。
- 确保制作的证件照质量高，符合用户要求的背景颜色。
```

### 图像工作流

这个一个头像背景替换的工作流，就像是给照片换装一样，这个工作流自动帮你把头像的"旧衣服"（原始背景）脱下来，换上"新衣服"（新背景颜色）。

<strong>具体步骤：</strong>

1. 开始节点：接收用户输入的头像、底色
2. 图像缩放节点（resize）：系统会先调整图片尺寸，确保图片大小合适（这里固定大小为 2 寸）
3. 抠图处理（cutout）节点：这一步是关键，会自动识别并分离出头像的主体部分，相当于把人物从原始背景中"抠"出来，这样在后面的图片合成时才能替换其他背景。

![[OLaQbMA5oo8Gjlx4JyCcWrmLnOf.png]]

1. 图片合成阶段：

   1. 选择器节点（流程分支）：
      1. 系统会根据用户选择的背景颜色需求，将工作流分成多条处理路径
      2. 每条路径负责处理一种特定的背景颜色方案
      3. 这种分支设计确保能够精确处理不同的背景需求
   2. 叠图处理（图层合成）：
      1. 在每个分支中，系统会将两个关键元素叠加：已经抠好的人物头像（前景）、对应的纯色背景（背景）通过专业的图层叠加技术，确保合成效果自然
   3. 变量聚合（结果整合）
      1. 分支处理完成后，将结果汇总到一个地方，方便后面的输出
2. 结束节点：将整合的结果输出

## 小结

- 需求分析是智能体开发的第一步，理解需求后才能设计出合适的实现方案
- 涉及提示词编写，让智能体调用工作流
- 图像工作流相关知识

## 拓展练习

- 你可以实现快捷指令功能，让用户以填写表单的方式与智能体交互
- 你可以支持设置不同的证件照大小（目前固定 2 寸）
