---
title: 扣子 + 剪映小助手学习手册
---

# 扣子 + 剪映小助手学习手册，打造智能工作流

## 简介

这个学习手册的核心价值是：<strong>打造智能工作流，让视频创作效率翻倍。</strong>如果你也想实现短视频创造自动化，不妨试试这个工具。

剪映小助手拥有丰富的扣子插件体系，可以通过扣子工作流结合其专有的插件，直接生成剪映草稿视频文件。

想要实现短视频自动化，我们需要从一些基础功能开始。一个复杂的视频都是由一个个基础的元素组合而成的：

- 时间线
- 字幕
- 图像
- 音频
- 关键帧
- 视频

## 基础概念

使用 coze 制作剪映视频工作流时，需要先了解一些剪辑相关概念，如此才能更好地运用相应的插件。

### 时间线

在视频剪辑中，<strong>时间线</strong>是剪辑软件中的一个核心概念，用来组织和呈现视频、音频、图像、字幕等素材的播放顺序和时长。

一条时间线可以理解成视频剪辑的一条轨道。

它的作用是排列素材、调整顺序、叠加、加特效等。将这些片段拖到<strong>时间线</strong>上，重新排序、加转场和音乐，就是剪辑。

一个剪映草稿允许有多条时间线。

### 关键帧

关键帧（Keyframe）<strong>是视频剪辑和动画制作中的一个核心概念，</strong>用来指定某个时间点上一个属性的数值。

可以把关键帧想象成视频或动画中的"路标"。

实际应用中，图片和字幕都支持一些常规的动画，复杂的需要定制的动画，可以使用关键帧实现。

举个例子：

假设你要做一个让小球从左移到右的动画：

1. 你在第 1 秒设置关键帧（路标 A），记录小球在最左边
2. 在第 5 秒设置关键帧（路标 B），记录小球在最右边

电脑就会自动计算出小球从 A 点到 B 点的移动路线，帮你补全中间的所有画面。这些关键帧就像动画的骨架，你只需要设定重要的节点，电脑就能自动填充中间过程。

<strong>常见应用场景</strong>

- <strong>人物/物体运动</strong>：让元素滑入滑出、弹跳等
- <strong>字幕动态出现</strong>：逐字打字、飘入飘出
- <strong>镜头推拉缩放</strong>：模拟相机效果
- <strong>音频淡入淡出</strong>：设置音量的关键帧
- <strong>视觉特效变化</strong>：模糊度、颜色变化等

# 时间线的处理

如下分别是制作图像数据、音频数据、字幕数据的插件。从它的输入参数可以看到，每个插件都包含 timelines 这个必填参数。因此理解时间线的使用非常关键。

![[Uv2DbSp6noSJRVxnOVNc3bArnCd.png]]
![[B59NbrFr0orKJ5xYuKcc789tnJ3.png]]
![[ZKllb74z3oJKuNxLFK5ckfuSnfc.png]]

大部分情况下，我们都需要根据时间线制作图像、音频、字幕数据。

## 案例应用：对其字幕和音频

这案例的目标是输入一段长文案，拆解成长短合适的字幕（防止字幕溢出），生成对应的音频，且字幕和音频对的上。

这是一个常用的场景，音频和字幕是短视频的重要部分，掌握了，对后续的视频自动化很有帮助。

实现流程应该是：长文案自动断句》语音合成》根据语音生成对应的时间线》根据时间线制作音频和字幕数据》创建剪映草稿》批量添加音频和字幕

注意点：资源合成插件输入的资源列表参数（如，图片列表、视频列表、字幕列表）的长度要与时间线列表参数的长度保持一致。

PS: 其中的自动断句插件、提取语音节点音频链接插件、读取音频时间线插件（分别位于下图的第 2、4、5 个节点）的相关说明文档是[【视频合成_速创小助手】插件使用说明](https://c1ga2vmd0f1.feishu.cn/wiki/KRudwGY9oi9HoLkb47Ycky9BnOg?fromScene=spaceOverview&table=tblnIEfomoYz6qh3&view=vew4EfIMPr)

![[EgWBbEDAgoaMFOxLf06cLJk6nHe.png]]

执行完工作流后，将输出的剪映草稿链接粘贴到剪映小助手中，下载素材和配置文件到本地电脑，打开剪映，即可看到对应的草稿，播放测试，符合预期。

![[U5kbbsgeNog800xn3X9cstTynDb.png]]

# 图像素材处理

使用图像素材，做一个基础的效果，生成一个视频。参考了官方文档[图片素材处理](https://krxc4izye0.feishu.cn/wiki/Pgm9wXA4EipKhYkeEQJcLBlJnWb)，但官方文档写的很简单，这里我基于自己的实践，重新梳理一下。

## 目标

使用一张背景图片，5 张轮播图片生成一个视频，时长 15 秒每隔 3 秒切换一张轮播图片。

## 步骤

![[Nk5Jblj77o3t8WxlMaocL07lnne.png]]

以下是相关步骤，参照[图片素材处理](https://krxc4izye0.feishu.cn/wiki/Pgm9wXA4EipKhYkeEQJcLBlJnWb)，我这边对之前一些注意事项做些说明。

1. 配置开始节点，接收一个图片对象和一个由多个图片对象构成的数组
2. str_to_list 节点是将一个图片对象字符串转换为图像列表
3. 创建时间线，设置时长 15 秒，分成 5 段。
4. 根据时间线制作两类图片数据，一个放背景图片，一个放轮播图片，都需要使用时间线工具承载。
5. 创建剪映草稿
6. 往草稿中批量添加图片
7. 输出剪映草稿的 url 链接
8. 复制 url 链接到剪映小助手中，它会自动下载相关素材，然后在本地电脑中生成一个剪映草稿文件夹。

![[J3LSbid6iof9lFxwyuoc6RSonac.png]]

1. 打开剪映就可以查看刚刚生成的草稿，你也可以在这进行二次创作。大大提高你的效率。

![[ZN4Bbx4EwomDBAx7t9vcUEBenQg.png]]

# 组合图像

同一帧中我们可以使用多张图片，进行组合。

以如下为例，这个一帧就是由提问者的图片和背景图片组合而成的，这样好处是调整主体图片大小，动画等属性，不会影响背景图片，也能实现复杂页面。

![[Xo1MbuJ4lot2NGxFLJ0cbYXlnLg.png]]
![[HACebaHBoo3GVTxzckocPUVNndf.png]]
![[IgTqbCtmxogVIvxFClYcdr7cnUg.png]]

<strong>组合图像的注意点：</strong>

- 图像遮挡问题：主体图片在前，背景图片在后，主体图片需要去除背景。
- 工作流设置：剪映轨道上的设置，主体图所在的轨道要在背景图轨道的上面，不然主体图会被背景图遮盖。为了达到这个效果，工作流需要先执行添加背景图片节点，再执行主体图片节点。

![[DNT8bqOUpoqpt9xCBPRcdHZ3n1g.png]]

# 添加关键帧动画

## 基础关键帧

![[Fbl0b8akooiolnxRoHAcxrirn2e.png]]

整体流程如下：

1. 配置开始节点，接收一个图片对象
2. str_to_list 节点是将一个图片对象字符串转换为列表
3. 创建时间线，设置时长 15 秒，分成 1 段
4. 根据时间线制作图片数据
5. 创建剪映草稿
6. 往草稿中批量添加图片
7. 生成关键帧数据。配置如下，这个动画生成的关键。

   1. ctpye 表示动画类型类型，当前选的是 X 轴移动。
   2. offsets 表示关键帧的位置和个数，中间以“|”隔开。如下表示，设置了 3 个关键帧的轨道位置，分别在 0% 、30%、100% 进度条上
   3. segment_infos 表示轨道数据，由 add_images 节点输出
   4. values 表示关键帧的属性值，必须与 offsets 的长度要一致。如下表示 3 个帧的 X 轴位置属性。
   5. height 和 width 在设定 X 轴或 Y 轴移动时，必须与草稿的一致

![[AC2zbvqbMoIyz8x2q10cJC4Anjg.png]]

1. 添加关键帧数据
2. 输出剪映草稿的 url 链接
3. 复制 url 链接到剪映小助手中，它会自动下载相关素材，然后在本地电脑中生成一个剪映草稿文件夹。播放后图片的动画效果是前 30% 匀速向左移动 200 像素，后 70% 恢复到初始位置。符合预期。

![[DMMGbuzP5oS4xuxfIS2co6yvnue.png]]

# 字幕处理

字幕在视频中起到很重要的作用，不仅能显示音频对应的文字，来提高信息获取效率，增强内容传播效果；

还能作为文字，为视频补充信息。

字幕也可以设置关键字标注。

## 字幕关键字

字幕关键字，是以标注特别的样式来突出展示文本。让用户快速抓住重点，增强内容传播的效果。效果如下：

![[WXjLb6aKIorThFxcCxycHtMnnxc.png]]

如何实现这个效果呢？

### 找到字幕制作插件

核心是通过 keywords 这个参数接收关键词列表

![[Hj9KbP6SXoOjj3xn9HlcpsKxnuf.png]]

### 获取关键词列表

通过大模型自动提取关键词，提示词如下：

```markdown
# 角色
你是一个卓越的关键词提取大师，在处理各类文本时，都能凭借敏锐的洞察力和专业的分析能力，精准无误地从其中提炼出最具代表性和核心意义的关键词，以此助力用户迅速把握文本的关键要点。

## 技能
### 技能 1: 提取关键词
1. 当用户输入文本后，你需要全面、深入地剖析文本内容，准确且迅速地为其提取出其中最具代表性的关键词，关键词必须来着原文。
2. 在提取关键词的过程中，要充分考虑文本的主题、语境以及关键信息之间的逻辑关系，确保提取的关键词能够高度概括文本的核心内容。
3. 完成关键词提取后，直接将其输出。

## 限制:
- 关键词必须来着原文
- 严格仅围绕提取输入句子中的关键词展开回答，对于任何与关键词提取无关的话题，坚决予以拒绝回答。
- 每段文本务必只提取一个最具代表性的关键词，有多个则随机选一个。
- 直接输出关键词，不进行额外的解释或说明 。
```

Ps: 这里使用批处理的方式，一次处理多个文本，即接收一个文本列表，输出关键词列表。

由于大模型批处理输出的是一个对象列表，需要使用代码节点将对象列表转换成文本列表。

![[HozgbIiQHorTJkxygEqczyL4nUe.png]]

对应的代码如下：

```cpp
# 在这里，您可以通过 'args'  获取节点中的输入变量，并通过 'ret' 输出结果
# 'args' 已经被正确地注入到环境中
# 下面是一个示例，首先获取节点的全部输入参数params，其次获取其中参数名为'input'的值：
# params = args.params; 
# input = params['input'];
# 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：
# ret: Output =  { "name": '小明', "hobbies": ["看书", "旅游"] };

async def main(args: Args) -> Output:
    params = args.params
    # 构建输出对象
    ret: Output = {
        "key_words": [o.get("output") for o in params['input']],  # 输出一个数组
    }
    return ret
```

# 视频素材处理

和图片素材处理类似，只有两个必填的参数：

1. 时间线列表
2. 视频链接列表

![[EdssbLZd3oihinxPVmScpCejnPc.png]]

# 技巧：高效地进行排版

为了自动生成预期的视频，我们经常需要多次调整扣子工作流。为了实现复杂的效果，可能需要调整的次数更多。这里分享一种，直观的调试方式。

<strong>先在剪映编辑好效果，记下相关设置，再到扣子工作流中修改插件参数。</strong>这样可以大幅度减少调试次数，快速实现预期的效果

我们以设置字幕为例，调整它的字体大小、动画、位置。

1. 先在剪映里调整好想要的效果，然后点击字幕查看对应的属性，记下来，以下是以位置为例

![[FedBbObyio8qhuxKg4FcawnPnYb.png]]

1. 在 coze 工作流的“add_captions”这个字幕添加插件中，找到对应的属性，填写
   ![[VmmHbhhayoklLRxW7Pgc7afBnSh.png]]
2. 重新运行工作流，即可得到预期的效果。
